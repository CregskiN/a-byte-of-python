# 基础

只是打印 `hello world` 远远不够，不是吗？你想做更多事 - 你想输入一些东西，操作它，然后得到一些输出。我们可以在 Python 中使用常量和变量来达成这个目的，此外我们将会在这章学习一些其他的概念。



## 注释

*注释* 指的是位于 `#` 符号右侧的文本，主要用于程序读者。

例如：

```python
print('hello world') # 注意 print 是一个函数
```

或者：

```python
# 注意 print 是一个函数
print('hello world')
```

在你的程序中，尽可能多地添加一些有用的注视，就可以：

+ 解释假设（译者注：这里的“假设”指的应该是 `if` 语句）
+ 解释重要的决策
+ 解释重要的细节
+ 解释你要解决的问题
+ 解释你的程序要克服的问题，例如：

[*代码告诉你“如何做”，注释告诉你“为什么”*](http://www.codinghorror.com/blog/2006/12/code-tells-you-how-comments-tell-you-why.html).

> 译者注：代码的作用是“知其然”，注释的作用是“知其所以然”

注释可以阅读代码的人快速理解这段程序在做什么。

记得，这个人可能是六个月后的你！



## 字面常量

一个字面常量可以是一个数值，如 `5`，`1.23`，或是一个字符串，如 `This is a string`，抑或是 `It's a string!`。

这被称作字面量，因为它就是字面的 - 你使用这个字面量表示的值。数值 `2` 仅仅代表它本身 - 这是一个 *常量* 因为它的值无法修改。因此，所有的这些被叫做字面常量。

> 译者注：字面的意思是“所见即所得”，而常量的特点是一旦被赋值则无法修改



## 数值

数值主要有两类 - 整型和浮点型。

例如 `2` 单纯是一个整数，就属于整型。

例如 `3.23` 和 `52.3E-4` 就是浮点型数值（简称浮点数）。 这里的符号 `E` 代表10上的指数. 在这个例子中， `52.3E-4` 表示 `52.3 * 10^-4^`.

> **经验丰富的程序员的注意事项**
>
> 这里没有 `长` 类型。 `int` 类型可以表示任意大小的整数



## 字符串

所谓字符串就是字母序列，字符串基本上只是一堆单词。

你将会在你所有的 Python 程序中使用字符串，所以注意接下来的部分。

### 单引号

你可以使用单引号指定字符串，例如 `'Quote me on this'`。

引号内的所有空（即空格和制表符），都会被原样保留。

### 双引号

字符串在双引号中的效果和在单引号中一模一样，例如 `"What's your name?"`.

### 三重引号

你可以用三重引号指定多行字符串 - (`"""` or `'''`)。你可以在三重引号中随意使用单引号和双引号，例如：

```python
'''This is a multi-line string. This is the first line.
This is the second line.
"What's your name?," I asked.
He said "Bond, James Bond."
'''
```

### 字符串是不可变的

这意味着一旦你创建了一个字符串，你就不能修改它。尽管这看似是件糟糕的事，但并非如此。我们一会儿会看到，为什么说这并不是一个对程序的限制。

> **C/C++ 程序员注意事项**
>
> 在 Python 中并没有分离的 `char` 数据。这么做根本没必要，我敢说你不会想念它。

> **Perl/PHP 程序员注意事项**
>
> 注意单括号字符串和双括号字符串是一样的 - 它们没什么不同。



### format 方法

有时我们需要从其它信息中构建字符串，这时 `format()` 方法就很有用了。

保存下面几行代码到文件 `str_format.py`：

```python
age = 20
name = 'Swaroop'

print('{0} was {1} years old when he wrote this book'.format(name, age))
print('Why is {0} playing with that python?'.format(name))
```

输出：

```
$ python str_format.py
Swaroop was 20 years old when he wrote this book
Why is Swaroop playing with that python?
```

**format 是如何工作的**

可以使用某些规则构建字符串，随后 `format` 方法被用于把这些规则替换为 `format` 对应的参数。

观察第一个使用 `format` 的位置，我们使用 `{0}` 对应 format 方法中的第一个变量 `name`。类似地，第二个规则 `{1}` 对应 format 方法中第二个参数 `age`。注意 Python 从 0 开始计数，意味着第一个位置的编号是 0，第二个位置的编号是 1，以此类推。

注意，我们可以用字符串连接实现相同的效果：

```python
name + ' is ' + str(age) + ' years old'
```

但是这样又丑又易出错。其次，到字符串的转换将由 `format` 方法自动完成，而不是像上边例子这样显式转换。再其次，使用 `format` ，可以修改消息，而不必处理用到的变量，反之亦然。

另外，注意下 `{}` 内的数字是可选的，就是说你还可以这样写：

```python
age = 20
name = 'Swaroop'

print('{} was {} years old when he wrote this book'.format(name, age))
print('Why is {} playing with that python?'.format(name))
```

程序的输出结果与之前的输出结果是的一样的。

我们还可以给参数命名：

```python
age = 20
name = 'Swaroop'

print('{name} was {age} years old when he wrote this book'.format(name=name, age=age))
print('Why is {name} playing with that python?'.format(name=name))
```

程序的输出结果与之前的输出结果又是的一样的。

Python 3.6 引入了一种更简短的方法，来给参数命名 —— “f-strings”：

```python
age = 20
name = 'Swaroop'

print(f'{name} was {age} years old when he wrote this book')  # 注意在字符串之前的 'f'
print(f'Why is {name} playing with that python?')  # 注意在字符串之前的 'f'
```

程序的输出结果与之前的输出结果还是的一样的。

Python 在 `format` 方法中做的，只是把参数值替换到规格的位置。还有更细节的规格，就比如：

```python
# decimal (.) precision of 3 for float '0.333'
print('{0:.3f}'.format(1.0/3))
# fill with underscores (_) with the text centered
# (^) to 11 width '___hello___'
print('{0:_^11}'.format('hello'))
# keyword-based 'Swaroop wrote A Byte of Python'
print('{name} wrote {book}'.format(name='Swaroop', book='A Byte of Python'))
```

输出：

```
0.333
___hello___
Swaroop wrote A Byte of Python
```

自从我们讨论格式化（formatting），注意 `print` 结尾处一直有一个不可见的 “换行” 符（`\n`），所以重复调用 `print` 会在不同行打印。为了阻止换行符被打印，你可以输出内容以 `end` 值结尾，下面演示以空结尾：

```python
print('a', end='')
print('b', end='')
```

输出是：

```
ab
```

或者你可以以空格结尾：

```python
print('a', end=' ')
print('b', end=' ')
print('c')
```

输出是：

```
a b c
```



### 转义序列

假设，你想要一个包含单引号（`'`）的字符串，你如何指定这个字符串？就比如，这个字符串是 `"What's your name?"`。你不能指定字符串为 `'What's your name?'` ，因为 Python 会困惑于字符串何处开始、何处结尾。因此，你必须明示，这个单引号并不是字符串的结尾，这可以通过名为 “*转义序列*” 的东西实现。你指定单引号为 `\'` ：注意反斜杠。现在，你可以指定字符串为 `'What\'s your name?'` 了。

另一种指定字符串的写法 `"What's your name?"`（即双引号）。类似的，在双引号括住的字符串中，你也必须使用转移序列。另外，你必须用转移序列 `\\` 表示反斜杠本身。

如果你想指定两行的字符串呢？一个方式是如[之前](https://python.swaroopch.com/basics.html#triple-quotes)那样使用三重引号，又或者你可以使用转义序列换行符 - `\n` 来明示它之后的部分独占一行。例如：

```python
'This is the first line\nThis is the second line'
```

另一个有用且应该被了解的转义序列就是制表符：`\t`。此外还有很多有用的转义序列，但是我在这里只提到最有用的，且仅此一次。

需要注意的一点：在字符串中，行尾的一个反斜杠表示衔接下一行的字符串，而不添加换行符。例如：

```python
"This is the first sentence. \
This is the second sentence."
```

等价于：

```python
"This is the first sentence. This is the second sentence."
```



### 原始字符串

如果你需要指定一些不需要特殊处理（如转义序列）的字符串，那你需要做的就是在字符串前添加  `r` 或  `R` 来指定原始字符串。例如：

```python
r"Newlines are indicated by \n"
```

> **正则表达式用户注意事项**
>
> 使用正则表达式时一定要用原始字符串。另外，a lot of backwhacking may be required. For example, backreferences can be referred to as `'\\1'` or `r'\1'`.

## 变量

只使用字面常量很容易无聊，我们还需要一些存储信息并操作它们的方式，*变量* 正式地进入我们的视野。“变量” 顾名思义 - 它的值是多样的（即你可以用变量存储任意值）。变量仅仅是你计算机内存的一部分，你可以在这里存储一些信息。不同于字面常量，你需要一些方法来访问这些变量，因此你得给变量命名。



## 标识符命名

变量是标识符的一部分。

Variables are examples of identifiers. *Identifiers* are names given to identify *something*. There are some rules you have to follow for naming identifiers:

+ The first character of the identifier must be a letter of the alphabet (uppercase ASCII or lowercase ASCII or Unicode character) or an underscore (`_`).
+ The rest of the identifier name can consist of letters (uppercase ASCII or lowercase ASCII or Unicode character), underscores (`_`) or digits (0-9).
+ Identifier names are case-sensitive. For example, `myname` and `myName` are *not* the same. Note the lowercase `n` in the former and the uppercase `N` in the latter.
+ Examples of *valid* identifier names are `i`, `name_2_3`. Examples of *invalid* identifier names are `2things`, `this is spaced out`, `my-name` and `>a1b2_c3`.

## Data Types

Variables can hold values of different types called *data types*. The basic types are numbers and strings, which we have already discussed. In later chapters, we will see how to create our own types using [classes](https://python.swaroopch.com/oop.html#classes).

## Object

Remember, Python refers to anything used in a program as an *object*. This is meant in the generic sense. Instead of saying "the *something*"', we say "the *object*".

> **Note for Object Oriented Programming users**:
>
> Python is strongly object-oriented in the sense that everything is an object including numbers, strings and functions.

We will now see how to use variables along with literal constants. Save the following example and run the program.

## How to write Python programs

Henceforth, the standard procedure to save and run a Python program is as follows:

### For PyCharm

1. Open [PyCharm](https://python.swaroopch.com/first_steps.html#pycharm).
2. Create new file with the filename mentioned.
3. Type the program code given in the example.
4. Right-click and run the current file.

NOTE: Whenever you have to provide [command line arguments](https://python.swaroopch.com/modules.html#modules), click on `Run` -> `Edit Configurations` and type the arguments in the `Script parameters:` section and click the `OK` button:

![PyCharm command line arguments](https://python.swaroopch.com/img/pycharm_command_line_arguments.png)

### For other editors

1. Open your editor of choice.
2. Type the program code given in the example.
3. Save it as a file with the filename mentioned.
4. Run the interpreter with the command `python program.py` to run the program.

### Example: Using Variables And Literal Constants

Type and run the following program:

```python
# Filename : var.py
i = 5
print(i)
i = i + 1
print(i)

s = '''This is a multi-line string.
This is the second line.'''
print(s)
```

Output:

```
5
6
This is a multi-line string.
This is the second line.
```

**How It Works**

Here's how this program works. First, we assign the literal constant value `5` to the variable `i` using the assignment operator (`=`). This line is called a statement because it states that something should be done and in this case, we connect the variable name `i` to the value `5`. Next, we print the value of `i` using the `print` statement which, unsurprisingly, just prints the value of the variable to the screen.

Then we add `1` to the value stored in `i` and store it back. We then print it and expectedly, we get the value `6`.

Similarly, we assign the literal string to the variable `s` and then print it.

> **Note for static language programmers**
>
> Variables are used by just assigning them a value. No declaration or data type definition is needed/used.

## Logical And Physical Line

A physical line is what you *see* when you write the program. A logical line is what *Python sees* as a single statement. Python implicitly assumes that each *physical line* corresponds to a *logical line*.

An example of a logical line is a statement like `print('hello world')` - if this was on a line by itself (as you see it in an editor), then this also corresponds to a physical line.

Implicitly, Python encourages the use of a single statement per line which makes code more readable.

If you want to specify more than one logical line on a single physical line, then you have to explicitly specify this using a semicolon (`;`) which indicates the end of a logical line/statement. For example:

```python
i = 5
print(i)
```

is effectively same as

```python
i = 5;
print(i);
```

which is also same as

```python
i = 5; print(i);
```

and same as

```python
i = 5; print(i)
```

However, I *strongly recommend* that you stick to *writing a maximum of a single logical line on each single physical line*. The idea is that you should never use the semicolon. In fact, I have *never* used or even seen a semicolon in a Python program.

There is one kind of situation where this concept is really useful: if you have a long line of code, you can break it into multiple physical lines by using the backslash. This is referred to as *explicit line joining*:

```python
s = 'This is a string. \
This continues the string.'
print(s)
```

Output:

```
This is a string. This continues the string.
```

Similarly,

```python
i = \
5
```

is the same as

```python
i = 5
```

Sometimes, there is an implicit assumption where you don't need to use a backslash. This is the case where the logical line has a starting parentheses, starting square brackets or a starting curly braces but not an ending one. This is called *implicit line joining*. You can see this in action when we write programs using [list](https://python.swaroopch.com/data_structures.html#lists) in later chapters.

## Indentation

Whitespace is important in Python. Actually, *whitespace at the beginning of the line is important*. This is called *indentation*. Leading whitespace (spaces and tabs) at the beginning of the logical line is used to determine the indentation level of the logical line, which in turn is used to determine the grouping of statements.

This means that statements which go together *must* have the same indentation. Each such set of statements is called a *block*. We will see examples of how blocks are important in later chapters.

One thing you should remember is that wrong indentation can give rise to errors. For example:

```python
i = 5
# Error below! Notice a single space at the start of the line
 print('Value is', i)
print('I repeat, the value is', i)
```

When you run this, you get the following error:

```
  File "whitespace.py", line 3
    print('Value is', i)
    ^
IndentationError: unexpected indent
```

Notice that there is a single space at the beginning of the second line. The error indicated by Python tells us that the syntax of the program is invalid i.e. the program was not properly written. What this means to you is that *you cannot arbitrarily start new blocks of statements* (except for the default main block which you have been using all along, of course). Cases where you can use new blocks will be detailed in later chapters such as the [control flow](https://python.swaroopch.com/control_flow.html#control_flow).

> **How to indent**
>
> Use four spaces for indentation. This is the official Python language recommendation. Good editors will automatically do this for you. Make sure you use a consistent number of spaces for indentation, otherwise your program will not run or will have unexpected behavior.

> **Note to static language programmers**
>
> Python will always use indentation for blocks and will never use braces. Run `from __future__ import braces` to learn more.

## Summary

Now that we have gone through many nitty-gritty details, we can move on to more interesting stuff such as control flow statements. Be sure to become comfortable with what you have read in this chapter.